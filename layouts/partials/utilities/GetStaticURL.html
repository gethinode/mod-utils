{{ $url := .url }}

{{ if not (strings.HasPrefix $url "http") }}
    {{ $lang := site.LanguageCode | default site.Language.Lang }}
    {{ $base :=  strings.TrimSuffix (printf "%s/" $lang) site.Home.RelPermalink }}
    {{ $url = partial "utilities/URLJoin.html" (dict "base" $base "path" $url) }}
{{ end }}

{{ return $url }}